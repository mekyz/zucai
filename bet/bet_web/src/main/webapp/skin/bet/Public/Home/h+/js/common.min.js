if($('a.J_alink').length){$('a.J_alink').on('click',function(e){e.preventDefault();var $_this=this,$this=$($_this),href=$this.prop('href')
var index=layer.msg('正在提交，请耐心等待...',{icon:16,shade:0.01});$.getJSON(href).done(function(data){if(data.status){if(data.url){layer.close(index);layer.msg(data.info+"....",{icon:1},function(){location.href=data.url;});}else{layer.close(index);layer.msg(data.info+"....",{icon:1,time:1000},function(){reloadPage(window);});}}else{layer.close(index);layer.alert(data.info,{title:'信息提示',icon:0},function(){window.location.reload();});}});})}
if($('a.J_alinkaa').length){$('a.J_alinkaa').on('click',function(e){e.preventDefault();var $_this=this,$this=$($_this),href=$this.prop('href')
var index=layer.msg('正在提交，请耐心等待...',{icon:16,shade:0.01});$.getJSON(href).done(function(data){if(data.status){if(data.url){layer.close(index);location.href=data.url;}else{layer.close(index);layer.msg(""+data.info+"....",{icon:1,time:1000},function(){reloadPage(window);});}}else{layer.close(index);layer.alert(data.info,{title:'信息提示',icon:0},function(){window.location.reload();});}});})}
if($('a.J_menuItem').length){$('a.J_menuItem').on('click',function(e){e.preventDefault();var $_this=this,$this=$($_this),title=$this.text(),href=$this.prop('href'),jq=top.jQuery;var p='<a href="javascript:;" class="active J_menuTab" data-id="'+href+'">'+title+' <i class="fa fa-times-circle"></i></a>';jq(".J_menuTab").removeClass("active");var n='<iframe class="J_iframe" name="iframe0" width="100%" height="100%" src="'+href+'" frameborder="0" data-id="'+href+'" seamless></iframe>';jq(".J_mainContent").find("iframe.J_iframe").hide().parents(".J_mainContent").append(n);jq(".J_menuTabs .page-tabs-content").append(p);})}
if($('a.J_del').length){$('a.J_del').on('click',function(e){e.preventDefault();var $_this=this,$this=$($_this),href=$this.prop('href'),msg=$this.data('msg');title=$this.data('title');if(title==''||title==undefined){title='';}
if(msg==''||msg==undefined){msg='确定要删除吗？'+title+'';}
if($this.parent().parent().parent().parent().parent().next().length==0){var no_l=0;}else{var no_l=1;};layer.alert(msg,{time:0,btn:['确定','取消'],title:'删除提示！',yes:function(index){layer.close(index);$.getJSON(href).done(function(data){if(data.status){if(data.url){layer.msg(""+data.info+"....",{icon:1,time:2000},function(){location.href=data.url;});}else{layer.msg(""+data.info+"....",{icon:1,time:2000},function(){if(no_l==0){reloadPage(window)};});}}else{layer.alert(data.info,{title:'温馨提示',icon:0});}});}});})}
if($('#commentForm').length){layui.use('layer',function(){$("#commentForm").validate({submitHandler:function(){var data=$("#commentForm").serialize();var data_id=$(".btn-info").attr('data-id');var url=$("#commentForm").attr('action');$("#commentForm").find('button[target-form]').attr("disabled",true);var index=layer.msg('正在提交，请耐心等待...',{icon:16,shade:0.01});$.ajax({url:url,type:"post",dataType:"json",data:data,success:function(res){if(res.status){if(res.url){if(res.url=='close'){layer.close(index);layer.msg(""+res.info+"....",{icon:1,time:2000},function(){window.parent.location.reload();var index=parent.layer.getFrameIndex(window.name);parent.layer.close(index);});}else{layer.close(index);layer.confirm(""+res.info+"....",{btn:['继续操作','关闭页面'],yes:function(){reloadPage(window);},btn2:function(){if(data_id=='1'){parent.layer.closeAll();parent.window.location.reload();}else{location.href=res.url;}}});}}else{layer.close(index);layer.msg(""+res.info+"....",{icon:1,time:1000},function(){reloadPage(window);});}}else{layer.close(index);layer.alert(res.info,{title:'温馨提示',icon:0});$("#commentForm").find('button[target-form]').attr("disabled",false);}}});}});});}
if($('#commentForm1').length){layui.use('layer',function(){$("#commentForm1").validate({submitHandler:function(){var data=$("#commentForm1").serialize();var url=$("#commentForm1").attr('action');$("#commentForm1").find('button[target-form]').attr("disabled",true);var index=layer.msg('正在提交，请耐心等待...',{icon:16,shade:0.01});$.ajax({url:url,type:"post",dataType:"json",data:data,success:function(res){if(res.status){if(res.url){if(res.url=='close'){layer.close(index);layer.msg(""+res.info+"....",{icon:1,time:2000},function(){window.parent.location.reload();var index=parent.layer.getFrameIndex(window.name);parent.layer.close(index);});}else{layer.close(index);layer.confirm(""+res.info+"....",{btn:['继续操作','关闭页面'],yes:function(){reloadPage(window);},btn2:function(){parent.layer.closeAll();}});}}else{layer.close(index);layer.msg(""+res.info+"....",{icon:1,time:1000},function(){reloadPage(window);});}}else{layer.close(index);layer.alert(res.info,{title:'温馨提示',icon:0});$("#commentForm1").find('button[target-form]').attr("disabled",false);}}});}});});}
if(document.createElement('input').placeholder!==''){$('[placeholder]').focus(function(){var input=$(this);if(input.val()==input.attr('placeholder')){input.val('');input.removeClass('placeholder');}}).blur(function(){var input=$(this);if(input.val()==''||input.val()==input.attr('placeholder')){input.addClass('placeholder');input.val(input.attr('placeholder'));}}).blur().parents('form').submit(function(){$(this).find('[placeholder]').each(function(){var input=$(this);if(input.val()==input.attr('placeholder')){input.val('');}});});}
$("#SelectAll").click(function(){if(this.checked){$("input[name='checkname']").each(function(){this.checked=true;});}else{$("input[name='checkname']").each(function(){this.checked=false;});}});$(".filetext").dblclick(function(){var img=$(this).val();if(!img){return false;}
layer.open({type:1,title:"图片查看",shadeClose:true,area:['100%','100%'],content:'<img src="'+img+'">'});})
function reloadPage(win){var location=win.location;location.href=location.pathname+location.search;}
function uphtml(_obj,obj,url){$(_obj).addClass(obj);layer.open({type:2,title:"上传文件",closeBtn:1,shadeClose:true,scrollbar:false,id:'uphtml',shade:0.8,area:['60%','450px'],content:url+"&obj="+obj,})}
function fileActive(data,div,num,fileext){if(num=='1'){div.find("input").val("").val(data.url);layer.closeAll();}else{var this_num=div.parent().find('.pics > ul >li').length;if(this_num==num){layui.use('layer',function(){layer.msg("已达选择上限");})}else{var fileImgSrc="/statics/js/webuploader/images/";if(fileext=='txt'){src=fileImgSrc+"text.png";}else if(fileext=='zip'){src=fileImgSrc+"zip.png";}else if(fileext=='docx'){src=fileImgSrc+"docx.png";}else if(fileext=='pptx'){src=fileImgSrc+"pptx.png";}else if(fileext=='xlk'){src=fileImgSrc+"xlsx.png";}else{src=data.url;}
var html='<li><img src="'+src+'" data-name="'+data.name+'"><input name="pics[]" value="'+src+'" type="hidden"><i class="fa fa-close" data-name="'+data.name+'" data-url="'+data.url+'" onclick="delfile(this)"></i></li>';div.parent().find('.pics > ul').append(html);layer.closeAll();}}}
function delfile(obj){$(obj).parent().remove();}
function layerfrm(title,width,height,url){layer.open({type:2,title:title,closeBtn:1,resize:true,maxmin:true,shadeClose:true,shade:0.8,area:[width,height],content:url})}
function SetStatus(obj,cls,type,id,status,url){if(cls=="info"){var cl="danger";}else{var cl="info";}
if(status==1){var st=0;}else{var st=1;}
$.ajax({url:url,type:"post",dataType:"json",data:{id:id,type:type,status:status},success:function(res){if(res.status){$(obj).removeClass("btn-"+cls);$(obj).addClass("btn-"+cl);$(obj).attr("onclick","return SetStatus(this,'"+cl+"','"+type+"','"+id+"','"+st+"','"+url+"');");}else{layer.alert(res.info,{title:'温馨提示',icon:0});}}});}